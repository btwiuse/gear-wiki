"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[1770],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>d});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),c=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(a),d=n,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||o;return a?r.createElement(g,s(s({ref:t},p),{},{components:a})):r.createElement(g,s({ref:t},p))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,s=new Array(o);s[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var c=2;c<o;c++)s[c]=a[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9580:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var r=a(7462),n=(a(7294),a(3905));const o={sidebar_label:"Message Format",sidebar_position:3},s="Message communication format",i={unversionedId:"developing-contracts/messaging",id:"developing-contracts/messaging",title:"Message communication format",description:"Interaction with each program takes place by messaging.",source:"@site/docs/developing-contracts/messaging.md",sourceDirName:"developing-contracts",slug:"/developing-contracts/messaging",permalink:"/docs/developing-contracts/messaging",draft:!1,editUrl:"https://github.com/gear-tech/wiki/edit/master/docs/developing-contracts/messaging.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_label:"Message Format",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Program State",permalink:"/docs/developing-contracts/gear-program"},next:{title:"Interaction Between Programs",permalink:"/docs/developing-contracts/interactions-between-programs"}},l={},c=[{value:"Types of messages",id:"types-of-messages",level:2},{value:"Gas",id:"gas",level:2},{value:"Message process module",id:"message-process-module",level:2},{value:"Understandable messages. Encode/Decode traits",id:"understandable-messages-encodedecode-traits",level:2}],p={toc:c};function m(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"message-communication-format"},"Message communication format"),(0,n.kt)("p",null,"Interaction with each program takes place by messaging."),(0,n.kt)("p",null,"Messages in Gear have common interface with the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Source account"),(0,n.kt)("li",{parentName:"ul"},"Target account"),(0,n.kt)("li",{parentName:"ul"},"Payload,"),(0,n.kt)("li",{parentName:"ul"},"Gas limit"),(0,n.kt)("li",{parentName:"ul"},"Value")),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Gas limit")," is the amount of gas that users are willing to spend to process the message."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Value")," is a currency value to be transferred to the target account. In the special message of the initial program upload, the value will be transferred to a balance of the newly created account for the program."),(0,n.kt)("h2",{id:"types-of-messages"},"Types of messages"),(0,n.kt)("p",null,"In the case of the program, there are the following types of messages:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"From user to program"),(0,n.kt)("li",{parentName:"ul"},"From program to program"),(0,n.kt)("li",{parentName:"ul"},"From program to user"),(0,n.kt)("li",{parentName:"ul"},"A special message from the user to upload a new program to the network. The payload must contain the WASM file of the program itself. Target account must not be specified - it will be created as a part of processing message post.")),(0,n.kt)("h2",{id:"gas"},"Gas"),(0,n.kt)("p",null,"Gas is a special currency for paying for blockchain computing. Its formation occurs by exchanging value with a special coefficient (currently = 1, but this may change in the future if the network votes).\nGas is related to weight based on a one-to-one ratio. One unit of weight is one picosecond of computation. In order for the block to fit into a specific execution time, we calculate its gas allowance available for spending, but we do not exceed it."),(0,n.kt)("p",null,"Based on the fact that one unit of weight equals one unit of gas,which takes one picosecond of calculations, we used benchmarks on average hardware to determine the cost of all available wasm instructions, including our syscalls"),(0,n.kt)("h2",{id:"message-process-module"},"Message process module"),(0,n.kt)("p",null,"Depending on the context the program interprets messages differently. To process messages in Gear programs, the ",(0,n.kt)("inlineCode",{parentName:"p"},"msg")," module from the proprietary ",(0,n.kt)("inlineCode",{parentName:"p"},"gstd")," standard library is used. All available functions described here:"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://docs.gear.rs/gstd/msg/index.html"},"https://docs.gear.rs/gstd/msg/index.html")),(0,n.kt)("h2",{id:"understandable-messages-encodedecode-traits"},"Understandable messages. Encode/Decode traits"),(0,n.kt)("p",null,"Gear uses the ",(0,n.kt)("inlineCode",{parentName:"p"},"parity-scale-codec"),", a Rust implementation of the SCALE Codec. SCALE is a lightweight format that allows encoding/decoding which makes it highly suitable for resource-constrained execution environments like blockchain runtimes and low-power/low-memory devices."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-rust"},"#[derive(Encode, Decode)]\nenum MyType {\n    MyStruct { field: ... },\n    ...\n}\n")),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://substrate.dev/docs/en/knowledgebase/advanced/codec"},"Learn more about SCALE Codec")))}m.isMDXComponent=!0}}]);